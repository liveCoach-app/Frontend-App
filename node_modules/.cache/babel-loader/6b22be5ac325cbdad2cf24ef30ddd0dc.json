{"ast":null,"code":"var _jsxFileName = \"/Users/felixtoft/Git Repos/liveCoach/Frontend-App/src/LiveCoachView/LiveCoachMap.js\";\nimport React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport './CoachLive.css';\nimport { Stage, Layer, Rect, Text, Circle, Line, Image, Group } from 'react-konva';\nimport Konva from 'konva';\nimport NoteView from './NoteView.js';\nexport default function Map() {\n  return /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    id: \"mapContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NoteView, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    id: \"mapRow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Stage, {\n    width: window.innerWidth / 2.2,\n    height: window.innerHeight / 1.2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Layer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Drawing, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 13\n    }\n  })))));\n} // CODE SNIPPET FOUND ONLINE, DON'T FULLY UNDERSTAND YET\n\nclass Drawing extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isDrawing: false,\n      mode: \"brush\"\n    };\n\n    this.handleMouseDown = () => {\n      console.log(\"mousedown\");\n      this.setState({\n        isDrawing: true\n      });\n      const stage = this.image.parent.parent;\n      this.lastPointerPosition = stage.getPointerPosition();\n    };\n\n    this.handleMouseUp = () => {\n      console.log(\"mouseup\");\n      this.setState({\n        isDrawing: false\n      });\n    };\n\n    this.handleMouseMove = () => {\n      // console.log('mousemove');\n      const {\n        context,\n        isDrawing,\n        mode\n      } = this.state;\n\n      if (isDrawing) {\n        console.log(\"drawing\"); // TODO: Don't always get a new context\n\n        context.strokeStyle = \"#df4b26\";\n        context.lineJoin = \"round\";\n        context.lineWidth = 5;\n\n        if (mode === \"brush\") {\n          context.globalCompositeOperation = \"source-over\";\n        } else if (mode === \"eraser\") {\n          context.globalCompositeOperation = \"destination-out\";\n        }\n\n        context.beginPath();\n        var localPos = {\n          x: this.lastPointerPosition.x - this.image.x(),\n          y: this.lastPointerPosition.y - this.image.y()\n        };\n        console.log(\"moveTo\", localPos);\n        context.moveTo(localPos.x, localPos.y); // TODO: improve\n\n        const stage = this.image.parent.parent;\n        var pos = stage.getPointerPosition();\n        localPos = {\n          x: pos.x - this.image.x(),\n          y: pos.y - this.image.y()\n        };\n        console.log(\"lineTo\", localPos);\n        context.lineTo(localPos.x, localPos.y);\n        context.closePath();\n        context.stroke();\n        this.lastPointerPosition = pos;\n        this.image.getLayer().draw();\n      }\n    };\n  }\n\n  componentDidMount() {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = 600;\n    canvas.height = 600;\n    const context = canvas.getContext(\"2d\");\n    this.setState({\n      canvas,\n      context\n    });\n  }\n\n  render() {\n    const {\n      canvas\n    } = this.state;\n    console.log(\"canvas\", canvas);\n    return /*#__PURE__*/React.createElement(Image, {\n      image: canvas,\n      ref: node => this.image = node,\n      width: 600,\n      height: 600,\n      stroke: \"blue\",\n      onMouseDown: this.handleMouseDown,\n      onMouseUp: this.handleMouseUp,\n      onMouseMove: this.handleMouseMove,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 7\n      }\n    });\n  }\n\n}","map":{"version":3,"sources":["/Users/felixtoft/Git Repos/liveCoach/Frontend-App/src/LiveCoachView/LiveCoachMap.js"],"names":["React","Component","Container","Row","Col","Stage","Layer","Rect","Text","Circle","Line","Image","Group","Konva","NoteView","Map","window","innerWidth","innerHeight","Drawing","state","isDrawing","mode","handleMouseDown","console","log","setState","stage","image","parent","lastPointerPosition","getPointerPosition","handleMouseUp","handleMouseMove","context","strokeStyle","lineJoin","lineWidth","globalCompositeOperation","beginPath","localPos","x","y","moveTo","pos","lineTo","closePath","stroke","getLayer","draw","componentDidMount","canvas","document","createElement","width","height","getContext","render","node"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport './CoachLive.css';\n\n\nimport { Stage, Layer, Rect, Text, Circle, Line, Image, Group } from 'react-konva';\nimport Konva from 'konva';\nimport NoteView from './NoteView.js'\n\n\nexport default function Map() {\n\n  return (\n    <Container fluid id=\"mapContainer\">\n      <NoteView />\n      <Row id=\"mapRow\">\n        <Stage width={window.innerWidth / 2.2} height={window.innerHeight / 1.2}>\n          <Layer>\n            <Drawing />\n          </Layer>\n        </Stage>\n      </Row>\n    </Container>\n  );\n}\n\n\n// CODE SNIPPET FOUND ONLINE, DON'T FULLY UNDERSTAND YET\n\nclass Drawing extends Component {\n\n  state = {\n    isDrawing: false,\n    mode: \"brush\"\n  }\n\n\n  componentDidMount() {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = 600;\n    canvas.height = 600;\n    const context = canvas.getContext(\"2d\");\n\n    this.setState({ canvas, context });\n  }\n\n  handleMouseDown = () => {\n    console.log(\"mousedown\");\n    this.setState({ isDrawing: true });\n\n\n    const stage = this.image.parent.parent;\n    this.lastPointerPosition = stage.getPointerPosition();\n  };\n\n  handleMouseUp = () => {\n    console.log(\"mouseup\");\n    this.setState({ isDrawing: false });\n  };\n\n  handleMouseMove = () => {\n  // console.log('mousemove');\n  const { context, isDrawing, mode } = this.state;\n\n  if (isDrawing) {\n    console.log(\"drawing\");\n\n    // TODO: Don't always get a new context\n    context.strokeStyle = \"#df4b26\";\n    context.lineJoin = \"round\";\n    context.lineWidth = 5;\n\n    if (mode === \"brush\") {\n      context.globalCompositeOperation = \"source-over\";\n    } else if (mode === \"eraser\") {\n      context.globalCompositeOperation = \"destination-out\";\n    }\n    context.beginPath();\n\n    var localPos = {\n        x: this.lastPointerPosition.x - this.image.x(),\n        y: this.lastPointerPosition.y - this.image.y()\n      };\n      console.log(\"moveTo\", localPos);\n      context.moveTo(localPos.x, localPos.y);\n\n      // TODO: improve\n      const stage = this.image.parent.parent;\n\n      var pos = stage.getPointerPosition();\n      localPos = {\n        x: pos.x - this.image.x(),\n        y: pos.y - this.image.y()\n      };\n      console.log(\"lineTo\", localPos);\n      context.lineTo(localPos.x, localPos.y);\n      context.closePath();\n      context.stroke();\n      this.lastPointerPosition = pos;\n      this.image.getLayer().draw();\n    }\n  };\n\n\n\n  render() {\n    const { canvas } = this.state;\n    console.log(\"canvas\", canvas);\n\n    return (\n      <Image\n        image={canvas}\n        ref={node => (this.image = node)}\n        width={600}\n        height={600}\n        stroke=\"blue\"\n        onMouseDown={this.handleMouseDown}\n        onMouseUp={this.handleMouseUp}\n        onMouseMove={this.handleMouseMove}\n      />\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}